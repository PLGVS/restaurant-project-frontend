<div class="container">
    <p-drawer [(visible)]="visible" [closable]="false">
        <ng-template #header>
            <div class="flex items-center gap-2">
                <p-avatar shape="circle" />
                <span class="font-bold">{{ userName }}</span>
            </div>
        </ng-template>

        <ng-template #content>
            <ul style="list-style: none;">
                <li><button pButton label="Reservations" icon="pi pi-book" class="w-full" severity="contrast"
                        text></button></li>
                <li><button pButton label="Menu" icon="pi pi-receipt" class="w-full" severity="contrast" text></button>
                </li>
            </ul>
        </ng-template>

        <ng-template #footer>
            <div class="flex items-center gap-2">
                <button pButton (click)="logout()" label="Logout" icon="pi pi-sign-out" class="w-full" severity="danger"
                    text></button>
            </div>
        </ng-template>
    </p-drawer>
    <div class="container__sidebar">
        <button pButton (click)="visible = true" icon="pi pi-bars" class="w-full" severity="contrast" text></button>
    </div>


    <div class="container__menu">
        <h1>Menu</h1>
        <p-tabs [value]="categories[0].categoryName" scrollable>
            <p-tablist>
                <p-tab *ngFor="let category of categories" [value]="category.categoryName">
                    {{ category.categoryName }}
                </p-tab>

            </p-tablist>
            <p-tabpanels>
                <p-tabpanel *ngFor="let category of categories" [value]="category.categoryName">

                    <p-table [value]="category.dishes" [tableStyle]="{ 'min-width': '60rem' }">
                        <ng-template #caption>
                            <div class="flex items-center justify-between">
                                <span class="dishes-title">Dishes</span>
                                <button class="add-button" (click)="showDialog()">Add
                                    Dish</button>
                            </div>

                            <p-dialog header="Add Dish" [modal]="true" [(visible)]="visibleDialog"
                                [style]="{ width: '25rem' }" class="dish-form">
                                <span class="p-text-secondary block mb-8">Dish information</span>
                                <div class="dish-form__input">
                                    <label for="dish-name" class="font-semibold w-24">Name</label>
                                    <input [(ngModel)]="dishData.name" pInputText id="dish-name" class="flex-auto"
                                        autocomplete="off" />
                                </div>
                                <div class="dish-form__input">
                                    <label for="image-url" class="font-semibold w-24">Image URL</label>
                                    <input [(ngModel)]="dishData.imageUrl" pInputText id="image-url" class="flex-auto"
                                        autocomplete="off" />
                                </div>
                                <div class="dish-form__input">
                                    <label for="ingredients" class="font-semibold w-24">Ingredients</label>
                                    <input [(ngModel)]="selectedIngredient" pInputText id="ingredients"
                                        class="flex-auto" autocomplete="off" />
                                    <button pButton icon="pi pi-plus" (click)="addIngredient(selectedIngredient)"
                                        severity="contrast"></button>

                                    <div class="dish-form__input__chips">
                                        <p-chip *ngFor="let ingredient of ingredients" label="{{ ingredient }}"
                                            [removable]="true" />
                                    </div>

                                </div>
                                <div class="dish-form__input">
                                    <label for="price" class="font-semibold w-24">Price</label>
                                    <input [(ngModel)]="dishData.price" pInputText id="price" class="flex-auto"
                                        autocomplete="off" maxlength="5" />
                                </div>
                                <div class="flex justify-end gap-2">
                                    <p-button label="Cancel" severity="secondary" (click)="visible = false" />
                                    <p-button label="Save" (click)="visible = false; submitDish(category.categoryName)"
                                        severity="contrast" />
                                </div>
                            </p-dialog>
                        </ng-template>
                        <ng-template #header>
                            <tr>
                                <th>Name</th>
                                <th>Image</th>
                                <th>Price</th>
                                <th>Ingredients</th>
                                <th></th>
                            </tr>
                        </ng-template>
                        <ng-template #body let-dish>
                            <tr>
                                <td><span class="dish-name">{{ dish.name }}</span></td>
                                <td>
                                    <img [src]="dish.imageUrl" [alt]="dish.name" class="w-24 rounded" />
                                </td>
                                <td>{{ dish.price | currency: 'USD' }}</td>
                                <td>
                                    <span *ngFor="let ingredient of dish.ingredients" class="ingredients">{{ ingredient
                                        }}</span>
                                </td>
                                <td>
                                    <div class="table-buttons">
                                        <button class="edit-button">Edit</button> <button class="delete-button"
                                            (click)="confirm($event, category.categoryName, dish.name)">Delete</button>
                                    </div>
                                </td>
                            </tr>
                        </ng-template>
                        <ng-template #footer> In total there are {{ category.dishes ? category.dishes.length : 0 }}
                            dishes.
                        </ng-template>
                    </p-table>


                    <!-- <table>
                        <tr>
                            <th>
                                <h3>Dishes</h3>
                                <div class="table-buttons"><button class="add-button" (click)="showDialog()">Add
                                        Dish</button></div>
                            </th>
                        </tr>
                        <p-dialog header="Add Dish" [modal]="true" [(visible)]="visibleDialog"
                            [style]="{ width: '25rem' }" class="dish-form">
                            <span class="p-text-secondary block mb-8">Dish information</span>
                            <div class="dish-form__input">
                                <label for="dish-name" class="font-semibold w-24">Name</label>
                                <input [(ngModel)]="dishData.name" pInputText id="dish-name" class="flex-auto"
                                    autocomplete="off" />
                            </div>
                            <div class="dish-form__input">
                                <label for="image-url" class="font-semibold w-24">Image URL</label>
                                <input [(ngModel)]="dishData.imageUrl" pInputText id="image-url" class="flex-auto"
                                    autocomplete="off" />
                            </div>
                            <div class="dish-form__input">
                                <label for="ingredients" class="font-semibold w-24">Ingredients</label>
                                <input [(ngModel)]="selectedIngredient" pInputText id="ingredients" class="flex-auto"
                                    autocomplete="off" />
                                <button pButton icon="pi pi-plus" (click)="addIngredient(selectedIngredient)"
                                    severity="contrast"></button>

                                <div class="dish-form__input__chips">
                                    <p-chip *ngFor="let ingredient of ingredients" label="{{ ingredient }}"
                                        [removable]="true" />
                                </div>

                            </div>
                            <div class="dish-form__input">
                                <label for="price" class="font-semibold w-24">Price</label>
                                <input [(ngModel)]="dishData.price" pInputText id="price" class="flex-auto"
                                    autocomplete="off" maxlength="5" />
                            </div>
                            <div class="flex justify-end gap-2">
                                <p-button label="Cancel" severity="secondary" (click)="visible = false" />
                                <p-button label="Save" (click)="visible = false; submitDish(category.categoryName)"
                                    severity="contrast" />
                            </div>
                        </p-dialog>
                        <tr *ngFor="let dish of category.dishes">
                            <td>
                                <p>{{ dish.name }}</p>

                                <div class="table-buttons">
                                    <button class="edit-button">Edit</button> <button class="delete-button"
                                        (click)="confirm($event, category.categoryName, dish.name)">Delete</button>
                                </div>
                            </td>
                        </tr>
                    </table> -->
                </p-tabpanel>
            </p-tabpanels>
        </p-tabs>
        <p-toast />
        <p-confirmdialog />

        <!-- <div class="tab-buttons">
            <button (click)="changeTab(category.categoryName.replace(' ', '-'))" *ngFor="let category of categories"
                id="{{ category.categoryName.replace(' ', '-') }}-button">{{
                category.categoryName }}</button>
        </div>

        <div class="tab-content">
            <div class="content" *ngFor="let category of categories" id="{{ category.categoryName.replace(' ', '-')}}">
                <h1>{{ category.categoryName }}</h1>
            </div>
        </div> -->

        <!-- <table>
            <tr>
                <th>
                    <h3>Categories</h3>
                    <div class="table-buttons"><button class="add-button">Add Category</button></div>
                </th>
            </tr>
            <tr *ngFor="let category of categories">
                <td>
                    <p>{{ category.categoryName }}</p>

                    <div class="table-buttons"><button class="edit-button">Edit</button> <button
                            class="delete-button">Delete</button>
                    </div>
                </td>
            </tr>
        </table> -->

        <!-- <table>
            <tr>
                <th>
                    <h3>Dishes</h3>
                    <div class="table-buttons"></div>
                </th>
            </tr>
            <tr *ngFor="let category of categories">
                <td *ngFor="let dish of category.dishes">
                    <p>{{ dish.name }}</p>
                    <div class="dish-buttons"><button class="edit-button">Edit</button>
                    </div>
                </td>
            </tr>
        </table> -->
    </div>


</div>